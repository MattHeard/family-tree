<!DOCYPE html>
<script src="d3.js" charset="utf-8"></script>
<script>
  function getPeople(data) {
    return data[0]["values"];
  }

  function getRelationships(data) {
    return data[1]["values"];
  }

  function getSpacing() {
    return 50;
  }

  function drawRelationships(data) {
    var spacing = getSpacing();
    var people = getPeople(data);
    var relationships = getRelationships(data);

    d3.select("svg")
      .selectAll("line")
        .data(relationships)
      .enter()
        .append("line")
        .attr("x1", function(d) { return people[d.from].x * spacing; })
        .attr("y1", function(d) { return people[d.from].y * spacing; })
        .attr("x2", function(d) { return people[d.to].x * spacing; })
        .attr("y2", function(d) { return people[d.to].y * spacing; })
        .style("stroke", "rgb(6,120,155)");
  }

  function drawPeople(data) {
    var spacing = getSpacing();
    var people = getPeople(data);

    d3.select("svg")
      .selectAll("circle")
        .data(people)
      .enter()
        .append("circle")
        .attr("r", 10)
        .attr("cx", function(d) { return d.x * spacing; })
        .attr("cy", function(d) { return d.y * spacing; })
  }

  d3.json("data.json", function(error, data) {
    drawRelationships(data);
    drawPeople(data);
  });
</script>
<style>
  body {
    margin: 0px;
  }

  svg {
    width: 800px;
    height: 600px;
  }

  circle {
    fill: LightSalmon;
  }
</style>
<body>
  <svg></svg>
</body>
